# 换热器性能监测系统 - 产品需求规格说明书（PRD）

**文档版本**：1.0
**发布日期**：2026年1月4日
**项目负责人**：系统分析师
**开发团队**：前端开发组

---

## 修订历史

| 版本 | 日期       | 修改人     | 修改描述                       |
| ---- | ---------- | ---------- | ------------------------------ |
| 1.0  | 2026-01-04 | 系统分析师 | 初始版本创建，基于需求澄清结果 |

---

## 目录

1. [项目概述](#1-项目概述)
   - [1.1 项目背景](#11-项目背景)
   - [1.2 核心价值](#12-核心价值)
   - [1.3 目标用户画像](#13-目标用户画像)
   - [1.4 核心应用场景](#14-核心应用场景)
2. [功能需求清单](#2-功能需求清单)
   - [2.1 用户认证模块](#21-用户认证模块)
   - [2.2 主页概览模块](#22-主页概览模块)
   - [2.3 换热器明细模块](#23-换热器明细模块)
   - [2.4 管段明细模块](#24-管段明细模块)
   - [2.5 预留功能接口](#25-预留功能接口)
3. [非功能需求](#3-非功能需求)
   - [3.1 性能指标](#31-性能指标)
   - [3.2 安全性要求](#32-安全性要求)
   - [3.3 兼容性要求](#33-兼容性要求)
   - [3.4 可用性标准](#34-可用性标准)
4. [输入输出与接口规范](#4-输入输出与接口规范)
   - [4.1 用户界面规范](#41-用户界面规范)
   - [4.2 数据接口规范](#42-数据接口规范)
   - [4.3 实时数据推送规范](#43-实时数据推送规范)
5. [验收标准](#5-验收标准)
   - [5.1 功能验收标准](#51-功能验收标准)
   - [5.2 性能验收标准](#52-性能验收标准)
   - [5.3 兼容性验收标准](#53-兼容性验收标准)

---

## 1. 项目概述

### 1.1 项目背景

随着工业设备智能化管理需求的提升，传统的人工巡检和定期维护模式已无法满足现代工业生产的效率与安全要求。换热器作为关键的热交换设备，其性能衰减和故障会直接影响生产效率和设备安全。本项目旨在开发一套**换热器性能监测系统**，通过实时采集温度、压力、流速等运行参数，结合传热系数预测模型，实现设备状态的实时监控和预测性维护。

### 1.2 核心价值

- **预防性维护**：通过实时监测和趋势分析，提前发现设备性能衰减迹象，避免非计划停机。
- **决策支持**：为管理人员提供数据驱动的决策依据，优化维护计划和资源分配。
- **安全预警**：实时报警机制可及时通知操作人员处理异常情况，防止设备损坏和安全事故。
- **效率提升**：减少人工巡检频率，降低维护成本，提高设备综合利用率。

### 1.3 目标用户画像

| 用户角色             | 主要职责                           | 使用场景                 | 数据权限                                                          |
| -------------------- | ---------------------------------- | ------------------------ | ----------------------------------------------------------------- |
| **现场操作员** | 负责特定换热器的日常监控和基础操作 | 控制室值班、现场巡检     | 仅查看负责的换热器`<br>`实时数据（5天历史）`<br>`报警确认权限 |
| **设备工程师** | 负责多台换热器的性能分析和故障诊断 | 办公室分析、远程技术支持 | 查看所有换热器`<br>`详细历史数据（30天）`<br>`数据导出权限    |
| **系统管理员** | 负责用户管理、系统配置和权限分配   | 系统维护、用户管理       | 全系统访问权限`<br>`用户管理、阈值配置`<br>`系统配置权限      |

### 1.4 核心应用场景

1. **实时监控场景**：操作员在控制室大屏上查看负责换热器的实时运行状态，及时发现异常。
2. **故障诊断场景**：工程师通过历史趋势分析，定位性能下降原因，制定维护方案。
3. **交接班场景**：通过系统记录和报警历史，完成工作交接和责任追溯。
4. **管理汇报场景**：管理人员导出性能报告，用于生产会议和决策分析。

---

## 2. 功能需求清单

### 2.1 用户认证模块

#### 2.1.1 用户登录

- **触发条件**：用户访问系统首页或未认证页面
- **处理过程**：
  1. 显示登录表单（用户名、密码）
  2. 用户输入凭据并提交
  3. 前端调用后端认证接口验证用户身份
  4. 后端返回JWT Token和用户权限信息
  5. 前端存储Token并跳转到主页
- **预期结果**：用户成功登录并进入系统主页

#### 2.1.2 用户注册（管理员功能）

- **触发条件**：管理员在用户管理页面点击"新增用户"
- **处理过程**：
  1. 显示注册表单（用户名、密码、角色、负责换热器列表等）
  2. 管理员填写信息并提交
  3. 前端验证表单数据
  4. 调用后端用户注册接口
- **预期结果**：新用户账户创建成功，可立即使用

#### 2.1.3 用户注销

- **触发条件**：用户点击页面右上角"退出登录"
- **处理过程**：
  1. 清除本地存储的Token和用户信息
  2. 跳转到登录页面
- **预期结果**：用户安全退出，无法再访问受保护页面

### 2.2 主页概览模块

#### 2.2.1 换热器列表展示

- **触发条件**：用户成功登录进入主页
- **处理过程**：
  1. 调用后端接口获取用户有权限查看的换热器列表
  2. 以卡片形式展示每个换热器信息（名称、类型、当前状态）
  3. 每个卡片显示健康状态指示灯（绿色-正常，黄色-警告，红色-故障）
  4. 点击卡片可跳转到对应换热器明细页面
- **预期结果**：用户可快速了解所有负责换热器的总体状态

#### 2.2.2 全局报警统计

- **触发条件**：页面加载或实时数据更新
- **处理过程**：
  1. 在页面顶部或侧边栏显示当前未处理报警数量
  2. 点击报警统计可跳转到报警列表页面
  3. 不同级别报警使用不同颜色标识（红色-紧急，橙色-重要，黄色-警告）
- **预期结果**：用户可快速了解系统整体报警状态

### 2.3 换热器明细模块

#### 2.3.1 基本参数概览

- **触发条件**：用户从主页点击某个换热器卡片
- **处理过程**：
  1. 显示换热器基本信息（名称、类型、工质、管段数等）
  2. 展示关键运行参数的平均值：
     - 平均温度（管侧/壳侧）
     - 平均压力（管侧/壳侧）
     - 平均流速（管侧/壳侧）
     - 平均总传热系数（K值）（仅管侧）
     - 管侧/壳侧对流换热系数
     - 平均污垢热阻
  3. 参数以数字仪表形式展示，附带单位标识
- **预期结果**：用户了解换热器整体运行状况

#### 2.3.2 管段列表展示

- **触发条件**：进入换热器明细页面
- **处理过程**：
  1. 以表格或列表形式展示该换热器所有管段
  2. 每行显示管段编号、当前温度、压力、流速、健康状态
  3. 点击某管段行跳转到该管段明细页面
  4. 支持按参数排序和筛选
- **预期结果**：用户可快速定位到特定管段进行详细查看

#### 2.3.3 趋势图表展示

- **触发条件**：页面加载或用户选择时间范围
- **处理过程**：
  1. 使用ECharts绘制关键参数趋势图（过去24小时）
  2. 支持切换查看不同参数（温度、压力、K值等）
  3. 支持缩放、平移等交互操作
  4. 图表下方显示统计摘要（最大值、最小值、平均值）
- **预期结果**：用户通过可视化方式了解参数变化趋势

### 2.4 管段明细模块

#### 2.4.1 详细参数展示

- **触发条件**：用户从换热器明细页面点击某个管段
- **处理过程**：
  1. 显示管段详细信息（编号、位置、所属换热器等）
  2. 展示该管段所有运行参数：
     - 温度（实时值、历史趋势）
     - 压力（实时值、历史趋势）
     - 流速（实时值、历史趋势）
     - 总传热系数（K值，包括实际值和预测值）
     - 污垢热阻（实时值、累积趋势）
  3. 参数以卡片形式分类展示，每组参数包含数值和单位
- **预期结果**：用户全面了解单个管段的详细运行状态

#### 2.4.2 管段切换功能

- **触发条件**：用户在管段明细页面
- **处理过程**：
  1. 在页面顶部提供下拉选择器，列出同一换热器所有管段
  2. 用户选择不同管段时，页面内容实时更新
  3. 切换过程保持页面布局不变，仅更新数据
  4. 当前选中管段在下拉选择器中高亮显示
- **预期结果**：用户可在同一页面快速查看不同管段数据，无需返回上级页面

#### 2.4.3 参数对比视图

- **触发条件**：用户点击"对比视图"按钮
- **处理过程**：
  1. 在同一页面内分栏显示2-3个管段的并行数据
  2. 支持用户选择要对比的管段
  3. 相同参数并排展示，便于发现差异
  4. 支持导出对比数据为表格
- **预期结果**：用户可快速发现不同管段间的性能差异

### 2.5 预留功能接口

#### 2.5.1 报警管理模块（预留）

- **功能描述**：实时报警显示、报警确认、报警历史查询
- **接口预留**：在页面布局中预留报警消息栏位置
- **数据结构**：定义报警消息格式，包括级别、时间、设备、描述、状态

#### 2.5.2 历史数据分析（预留）

- **功能描述**：多维度历史数据查询、趋势分析、报表生成
- **接口预留**：在导航菜单中预留"数据分析"菜单项
- **数据需求**：定义历史数据查询API参数格式

#### 2.5.3 系统配置管理（预留）

- **功能描述**：报警阈值配置、用户权限管理、设备参数设置
- **接口预留**：在用户权限数据结构中预留配置权限字段
- **界面预留**：在管理员视图中预留"系统设置"入口

---

## 3. 非功能需求

### 3.1 性能指标

| 指标类别               | 具体要求                                        | 测量方法                                     |
| ---------------------- | ----------------------------------------------- | -------------------------------------------- |
| **页面加载时间** | 关键页面（主页、换热器明细）初始加载时间 ≤ 3秒 | 使用浏览器开发者工具测量DOMContentLoaded时间 |
| **数据刷新延迟** | 实时数据从采集到前端展示延迟 ≤ 10秒            | 从数据时间戳到页面更新时间差计算             |
| **接口响应时间** | API接口90%请求响应时间 ≤ 500ms                 | 后端监控日志统计P90响应时间                  |
| **并发用户支持** | 支持50个用户同时在线操作                        | 压力测试，模拟50并发用户操作                 |
| **数据吞吐量**   | 支持每秒处理100条实时数据更新                   | SSE连接和数据推送压力测试                    |

### 3.2 安全性要求

| 安全领域           | 具体要求                                         | 实施方式                                                 |
| ------------------ | ------------------------------------------------ | -------------------------------------------------------- |
| **身份认证** | 使用JWT Token实现无状态认证，Token有效期24小时   | 前端存储Token于localStorage，每次请求携带Authorization头 |
| **权限控制** | 基于角色的访问控制（RBAC），前端路由守卫验证权限 | 用户登录时获取权限列表，动态生成可访问路由               |
| **数据传输** | 所有API通信使用HTTPS加密传输                     | 部署时配置SSL证书，前端使用https协议                     |
| **输入验证** | 前端对所有用户输入进行格式验证和清理             | 使用Vue3表单验证库，防止XSS攻击                          |
| **会话安全** | 用户注销时立即清除本地Token，Token可撤销         | 实现Token黑名单机制或短期有效期                          |

### 3.3 兼容性要求

| 平台/环境            | 兼容要求                                     | 测试方法                           |
| -------------------- | -------------------------------------------- | ---------------------------------- |
| **桌面浏览器** | Chrome 90+、Edge 90+、Firefox 88+ 完全支持   | 在这些浏览器版本上进行功能测试     |
| **IE浏览器**   | IE 11 基本功能可用（降级体验）               | 使用Polyfill和降级方案保证核心功能 |
| **屏幕尺寸**   | 支持1920×1080及以上分辨率，适配1366×768    | 响应式设计，使用Flexbox/Grid布局   |
| **操作系统**   | Windows 10/11、macOS 10.15+、主流Linux发行版 | 跨平台功能一致性测试               |
| **网络环境**   | 支持离线状态下的基础功能展示（使用缓存数据） | 实现Service Worker缓存策略         |

### 3.4 可用性标准

| 可用性原则         | 具体要求                                    | 实现方式                               |
| ------------------ | ------------------------------------------- | -------------------------------------- |
| **易学性**   | 新用户可在10分钟内学会基本操作              | 提供界面引导、操作提示、简洁的图标文字 |
| **效率性**   | 常用操作（切换管段、查看趋势）可在3步内完成 | 优化导航结构，减少点击次数             |
| **容错性**   | 操作错误时有明确提示和恢复方法              | 统一的错误提示组件，提供撤销操作       |
| **一致性**   | 全系统保持统一的视觉风格和交互模式          | 建立设计系统，使用组件库               |
| **可访问性** | 支持键盘导航，满足WCAG 2.1 AA级标准         | 语义化HTML，ARIA标签，色彩对比度检查   |

---

## 4. 输入输出与接口规范

### 4.1 用户界面规范

#### 4.1.1 视觉设计原则

- **风格定位**：简洁、科技感、专业工业风格
- **色彩体系**：
  - 主色：深蓝色（#1a237e）代表专业稳重
  - 辅色：青色（#00bcd4）代表科技感
  - 状态色：绿色（#4caf50）/黄色（#ff9800）/红色（#f44336）
- **字体规范**：主要使用系统字体族，优先使用Segoe UI、Roboto
- **图标系统**：使用Material Design Icons，保持视觉一致性

#### 4.1.2 布局结构

```
+---------------------------------------------------+
| 顶部栏 [Logo] [用户信息] [报警统计] [退出]         |
+---------------------------------------------------+
| 侧边导航树 |               主内容区                  |
|           |                                         |
| • 主页     |  <当前页面内容>                        |
| • 换热器列表|                                         |
| • 数据分析 |                                         |
| • 系统设置 |                                         |
|           |                                         |
+---------------------------------------------------+
```

#### 4.1.3 组件规范

- **导航组件**：侧边导航树支持多级展开收起
- **数据卡片**：统一尺寸和间距，包含标题、数值、单位、趋势箭头
- **图表组件**：使用ECharts，统一配色和交互行为
- **表单组件**：统一的输入框、选择器、按钮样式
- **弹窗组件**：模态对话框，半透明遮罩，明确操作按钮

### 4.2 数据接口规范

#### 4.2.1 后端API基础规范

- **协议**：HTTP/HTTPS
- **数据格式**：JSON
- **编码**：UTF-8
- **认证方式**：Bearer Token（JWT）
- **响应格式**：

```json
{
  "status": "success" | "error",
  "message": "操作描述信息",
  "data": {} | [],
  "timestamp": "2026-01-04T18:06:00Z"
}
```

#### 4.2.2 核心API接口清单

| 接口名称             | 方法 | 路径                            | 功能描述                   | 请求参数                                 | 响应示例                                      |
| -------------------- | ---- | ------------------------------- | -------------------------- | ---------------------------------------- | --------------------------------------------- |
| **用户登录**   | POST | `/api/auth/login`             | 用户登录获取Token          | `username`, `password`               | `{token: "jwt...", user: {...}}`            |
| **换热器列表** | GET  | `/api/heat-exchangers`        | 获取用户可访问的换热器列表 | `无`                                   | `[{id, name, type, status}]`                |
| **运行参数**   | GET  | `/api/operation-parameters`   | 获取运行参数数据           | `heat_exchanger_id`, `day`, `hour` | `[{timestamp, temperature, pressure, ...}]` |
| **物理参数**   | GET  | `/api/physical-parameters`    | 获取物性参数数据           | `heat_exchanger_id`, `day`, `hour` | `[{density, viscosity, ...}]`               |
| **性能参数**   | GET  | `/api/performance-parameters` | 获取性能参数数据           | `heat_exchanger_id`, `day`, `hour` | `[{K, alpha_i, alpha_o, ...}]`              |
| **K值管理**    | GET  | `/api/k-management`           | 获取K值管理数据            | `heat_exchanger_id`, `day`, `hour` | `[{K_LMTD, K_predicted, K_actual}]`         |
| **模型参数**   | GET  | `/api/model-parameters`       | 获取模型参数数据           | `heat_exchanger_id`, `day`           | `[{a, p, b}]`                               |
| **实时数据**   | SSE  | `/api/realtime-stream`        | 实时数据推送流             | `heat_exchanger_id`                    | SSE事件流                                     |

#### 4.2.3 数据模型示例

```json
// 换热器基本信息
{
  "id": 1,
  "name": "主反应器换热器",
  "type": "管壳式",
  "tube_side_fluid": "水",
  "shell_side_fluid": "蒸汽",
  "tube_section_count": 12,
  "shell_section_count": 1,
  "health_status": "normal", // normal, warning, fault
  "last_update": "2026-01-04T18:06:00Z"
}

// 实时运行参数
{
  "heat_exchanger_id": 1,
  "points": 5,
  "side": "tube",
  "timestamp": "2026-01-04T18:06:00Z",
  "temperature": 85.3,
  "pressure": 101325,
  "flow_rate": 0.5,
  "velocity": 1.2
}

// 性能参数
{
  "heat_exchanger_id": 1,
  "points": 5,
  "side": "tube",
  "timestamp": "2026-01-04T18:06:00Z",
  "K": 1250.5,
  "alpha_i": 850.2,
  "alpha_o": 980.3,
  "heat_duty": 1500000,
  "effectiveness": 0.85,
  "lmtd": 45.2
}
```

### 4.3 实时数据推送规范

#### 4.3.1 SSE（Server-Sent Events）实现

- **连接建立**：前端通过EventSource连接 `/api/realtime-stream`
- **重连机制**：连接断开时自动尝试重新连接，指数退避策略
- **事件类型**：
  - `parameters_update`：运行参数更新
  - `performance_update`：性能参数更新
  - `alert_new`：新报警产生
  - `system_status`：系统状态更新

#### 4.3.2 数据推送频率

- **正常运行**：每5-10秒推送一次聚合数据
- **报警状态**：立即推送报警信息，不延迟
- **系统繁忙**：动态调整推送频率，最低30秒一次

#### 4.3.3 消息格式

```javascript
// SSE事件示例
event: parameters_update
data: {
  "heat_exchanger_id": 1,
  "timestamp": "2026-01-04T18:06:00Z",
  "data": {
    "temperature": 85.3,
    "pressure": 101325,
    "flow_rate": 0.5,
    // ...其他参数
  }
}
```

---

## 5. 验收标准

### 5.1 功能验收标准

| 功能模块             | 验收项目          | 通过标准                         | 测试方法                   |
| -------------------- | ----------------- | -------------------------------- | -------------------------- |
| **用户登录**   | 1. 正确凭据登录   | 成功跳转到主页，显示用户信息     | 输入有效用户名密码测试     |
|                      | 2. 错误凭据登录   | 显示明确错误提示，不跳转         | 输入错误密码测试           |
|                      | 3. Token过期处理  | 自动跳转到登录页，提示重新登录   | 修改本地Token时间戳测试    |
| **主页概览**   | 1. 换热器列表加载 | 3秒内显示所有换热器卡片          | 网络正常条件下测试加载时间 |
|                      | 2. 健康状态显示   | 卡片正确显示红/黄/绿状态灯       | 模拟不同状态数据测试       |
|                      | 3. 点击跳转       | 点击卡片正确跳转到对应换热器页   | 点击多个卡片验证跳转目标   |
| **换热器明细** | 1. 参数平均值显示 | 正确计算并显示各参数平均值       | 与后端计算结果对比验证     |
|                      | 2. 管段列表展示   | 显示所有管段，包含基本参数       | 检查列表项数量和内容       |
|                      | 3. 趋势图表交互   | 图表可正常缩放、平移、切换参数   | 执行所有图表交互操作测试   |
| **管段明细**   | 1. 详细参数展示   | 显示管段所有运行参数，数值正确   | 与API返回数据逐项对比      |
|                      | 2. 管段切换功能   | 下拉选择器切换后页面内容实时更新 | 连续切换多个管段测试响应   |
|                      | 3. 实时数据更新   | 5-10秒内自动更新页面数据         | 监控页面数据更新时间间隔   |

### 5.2 性能验收标准

| 性能指标                | 验收标准               | 测试环境                  | 通过条件             |
| ----------------------- | ---------------------- | ------------------------- | -------------------- |
| **页面加载时间**  | 主页≤3秒，明细页≤4秒 | 100Mbps网络，Chrome浏览器 | 10次测试平均值达标   |
| **接口响应时间**  | P90响应时间≤500ms     | 后端测试环境，模拟10并发  | 性能监控工具验证     |
| **数据刷新延迟**  | 实时数据≤10秒延迟     | 模拟实时数据推送          | 时间戳差计算达标     |
| **内存使用**      | 单页内存增长≤50MB     | Chrome内存分析工具        | 长时间运行无内存泄漏 |
| **SSE连接稳定性** | 24小时连接断开≤3次    | 持续运行测试              | 连接日志分析达标     |

### 5.3 兼容性验收标准

| 兼容性项目           | 验收标准                          | 测试方法                       | 通过条件                 |
| -------------------- | --------------------------------- | ------------------------------ | ------------------------ |
| **浏览器兼容** | Chrome/Edge/Firefox最新版功能完整 | 在目标浏览器上执行核心功能测试 | 所有核心功能正常工作     |
| **IE11兼容**   | 基本数据显示和导航功能可用        | IE11上测试关键用户路径         | 用户可以完成基本监控任务 |
| **响应式布局** | 1366×768及以上分辨率正常显示     | 调整浏览器窗口大小测试         | 布局无错位，功能正常     |
| **移动端适配** | 平板设备上主要功能可用            | 平板浏览器模拟器测试           | 关键信息可读，操作可行   |
| **网络适应性** | 弱网环境下基础功能可用            | 模拟慢速网络（3G速度）         | 页面可加载，数据可查看   |

---

## 附录

### A. 术语表

| 术语       | 英文                                    | 定义                                     |
| ---------- | --------------------------------------- | ---------------------------------------- |
| 换热器     | Heat Exchanger                          | 用于两种或多种流体之间进行热量交换的设备 |
| 管段       | Tube Section                            | 换热器中分段测量的管道部分               |
| 总传热系数 | Overall Heat Transfer Coefficient (K)   | 衡量换热器整体传热能力的参数             |
| 污垢热阻   | Fouling Resistance                      | 换热表面因沉积物导致的额外热阻           |
| LMTD       | Logarithmic Mean Temperature Difference | 对数平均温差，用于换热器计算             |
| SSE        | Server-Sent Events                      | 服务器推送事件，用于实时数据推送的技术   |

### B. 参考文档

1. **后端API文档**：`backend/系统设计图表说明.md`
2. **数据库设计**：`heat_exchanger_table_structure.md`
3. **初始需求**：`初始需求.txt`
4. **技术架构**：`程序架构设计.md`

### C. 开发规范参考

1. **Vue3开发规范**：遵循Vue官方风格指南
2. **JavaScript规范**：使用严格类型检查，接口定义优先
3. **代码风格**：使用ESLint + Prettier统一代码格式
4. **Git提交规范**：遵循Conventional Commits规范

---

**文档状态**：✅ 审核通过
**下一阶段**：UI/UX设计 → 前端开发 → 集成测试 → 部署上线

*本文档将作为项目开发的唯一需求依据，任何需求变更需通过正式变更流程。*
