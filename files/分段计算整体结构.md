**阶段一：离线实验标定（基于Wilson图解法）**

此阶段为一次性工作，在监测程序建立前完成，目的是获取目标换热器精确的传热模型参数。

l **步骤1：实验设计与数据采集**

l **工作内容：** 在洁净或已知污垢状态下，对换热器进行一系列性能测试。通常需要固定一侧流体（如壳程流体）的入口温度和流量，系统性地改变另一侧流体（如管程流体）的流量，并精确记录每一组工况下的四端温度（壳程进出口、管程进出口）和两侧流量。

l **输入参数：** 多组实验工况数据点，每组包括：管程流体流量 m_t，壳程流体流量 m_s，管程进出口温度 T_t,in, T_t,out，壳程进出口温度 T_s,in, T_s,out。

l **输出参数：** 一系列原始实验数据。

l **步骤2：数据处理与关联式拟合**

l **工作内容：** 使用**结合非线性回归的Wilson图解法**对实验数据进行处理。建立基于热平衡和总传热方程的数学模型，例如：

1/(U*A) = 1/(h_t*A_t) + R_f,t/A_t + R_w + R_f,s/A_s + 1/(h_s*A_s)

其中，对流给热系数 h 通常表示为 Nu = C * Re^a * Pr^b 的形式。将此模型与所有实验数据点进行非线性最小二乘法拟合。

l **输入参数：** 原始实验数据、换热器几何参数（A_t, A_s等）、流体物性数据库。

l **输出参数：** 专属于此换热器的对流给热系数关联式中的 **常数C和指数a, b** （例如，管程的 C_t, a_t, b_t 和壳程的 C_s, a_s, b_s）。这些参数是后续在线监测的核心依据。

**阶段二：在线性能监测（基于分段计算）**

此阶段为监测程序的核心，实时运行。

l **步骤1：输入实时工况参数**

l **工作内容：** 从DCS、PLC或传感器实时获取换热器的运行数据。

l **输入参数：** 实时数据流，包括：管程流体流量 m_t，壳程流体流量 m_s，管程入口温度 T_t,in，壳程入口温度 T_s,in。

l **输出参数：** 当前时刻的工况输入。

l **步骤2：模型初始化与分段**

l **工作内容：** 根据换热器总长度 L，将其在数值上划分为 N 个微元段，每段长度 dL = L/N。同时，需要对未知出口温度（如 T_s,out）进行一个初始假设，以便开始迭代计算。

l **输入参数：** 换热器总长度 L、总换热面积 A、分段数 N（通常取50-200，取决于精度要求）。

l **输出参数：** 每个微元段的几何参数（dA），以及计算循环的初始条件。

l **步骤3：分段迭代计算核心循环（从 i=1 到 N）**

l **工作内容：** 对每一个微元段 i 进行传热计算。

l **3.1 获取段入口条件：** 第 i 段的入口温度即为第 i-1 段的出口温度。对于第一段，入口温度为已知的换热器总入口温度。

l **3.2 计算段内平均物性：** 根据段入口温度和对出口温度的估计值，计算该段的平均温度，并调用物性数据库查询或计算该平均温度下的流体密度、粘度、比热、导热系数等。

l **3.3 计算局部传热系数：** 利用**阶段一标定出的传热关联式** (Nu = C * Re^a * Pr^b)，结合该段的平均物性和流速，计算管程和壳程的局部对流给热系数 h_t,i 和 h_s,i。

l **3.4 计算总传热系数与换热量：** 根据当前的污垢热阻 R_f（初始可设为0或设计值），计算该段的总传热系数 U_i。然后利用对数平均温差法（LMTD）或ε-NTU法计算该段的换热量 dQ_i。

l **3.5 计算段出口温度：** 根据 dQ_i = m*c_p*dT，计算出管程和壳程流出第 i 段时的出口温度，作为下一段的入口。

l **循环过程：** 重复以上步骤，直至计算完所有 N 个微元段。

l **步骤4：总体收敛判断与参数修正**

l **工作内容：** 完成所有分段计算后，得到一个计算出的总出口温度（如 T_s,out,calc）。

l **温度收敛：** 将计算值 T_s,out,calc 与步骤2中假设的 T_s,out,guess 进行比较。如果误差大于预设阈值，则用 T_s,out,calc 作为新的假设值，返回步骤3重新进行迭代，直到收敛。

l **性能监测（污垢热阻计算）：** 当温度迭代收敛后，程序会得到一个基于洁净/标定状态的理论出口温度 T_t,out,theory。将此理论值与**传感器实际测量的出口温度**T_t,out,actual 进行比较。如果存在偏差，说明总传热系数发生了变化，最主要的原因是污垢的形成。此时，程序可以进入一个 **外循环** ，以**污垢热阻**R_f 为变量，反复执行步骤3和4，直到计算出的出口温度与实际测量的出口温度相匹配。

l **输入参数：** 计算收敛后的理论出口温度、实际测量的出口温度。

l **输出参数：** **当前时刻的等效污垢热阻**R_f，这是一个衡量换热器清洁度的关键指标。

l **步骤5：结果输出与展示**

l **工作内容：** 将计算和分析结果以用户友好的方式展示出来。

l **输出参数：**

l **关键性能指标：** 总传热系数 U、总换热量 Q、等效污垢热阻 R_f、换热效率。

l **内部状态分布：** 沿换热器长度方向的温度分布曲线（管程、壳程、壁面）。

**报警与建议：** 当污垢热阻超过预设阈值时，系统可自动报警，并建议进行清洗或维护。
